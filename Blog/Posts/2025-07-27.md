# It's blog day
Almost forgot about this. Well, whatever.

## Rust torrent downloader.
It's done! Well, semi done.

The CLI UX is ugly. real ugly. Debugging is all over the place, no comments etc. But it works. I can now leave the PI to download and process anime for me to be able to watch later. Let me explain... Somehow.

I've talked about this program in some past blog posts over the past month. To explain how it works, let me make a quick diagram.
![A very poorly drawn diagram. Contains arrows and words showing flow of data](Blog/Assets/2025-07-27/diagram.png)

I apologise for how bad the diagram is, it's just kinda a wipe this up quickly for demonstration purpose. I'll explain now:

Every hour, a cron job starts which calls the rust program. From their:
- Rust sends 3 requests to MAL, Specifically this endpoint: `https://myanimelist.net/animelist/{user}/load.json?tag={SeasonYear}`
- Mal responds with JSON which rust parses.
- Rust sends a request to Nyaa with the query of `{torrent} 1080p {anime}`. per anime watching.
- Nyaa sends back a rss feed, which rus parses once again.
- If no torrents are found, another request is sent to Nyaa under a different torrent provider. Until torrent providers are empty or one is found.
- Rust processes the torrents to make sure we don't download duplicates and that they are of the past 2 seasons.
- Rust sends a request to qbittorrent per torrent downloaded. (Can do batch link submission though)
- Qbittorrent downloads and seeds said torrents.
- Upon torrent downloaded, web request gets sent to [Ntfy](https://ntfy.sh) (diagram is slightly wrong). To tell me that the download is complete
- Simultaneously, a request is sent to jellyfin (via the api) to refresh the media libraries (to download the metadata, generate trickplay, etc).

It's a complex automation, but one which works and does everything that i would do anyway just automatically. Although, i would skip some steps as i normally know what i want to watch.

Theres still a lot to be done, like i want to add a way so that i can use a custom albert plugin and request the pi downloads a torrent. I want to have auto deleting of old torrents (i don't have infinite storage here!), etc. But the basic prototype
works for now. I don't know yet if i'll release this project to the public or not. I still have a lot of backend stuff to work on.

### Issues
As this blog is written across 2 days, the first and next part were written on the 25th. This is the 27th where i've found some issues...
- Some things arent working correctly. Not picking up the `.env` file for half the program to work.
- Naming of torrents

I'm more annoying at the naming of torrents. Theres no common rule in place on how to name torrents, other than it should contain uploader, anime name, anime season/episode at the minimum. Jellyfin and all it's plugins do an amazing job at finding
the metadata for each anime even when there isn't a common naming scheme or one that follows the recommendation. Most of the time it's fine, until we get slight differences, like this one:
- `Yuusha Party wo Tsuihou sareta Shiromadoush`
- `Yuusha Party o Tsuihou sareta Shiro Madoush`

The two above are the same show, yet spelt slightly differently. Causing my program trouble as it doesn't recognise that name. So i'm going to have to basically "hard code" fixes for some of them, just be adding another 2 tags to MAL. Annoying, but
devs work around the system, the system doesn't work around us.

### Just a final heading

For now, it should save me from having to wait like 1/2 hour just for jellyfin to update the library when i decide to add a bunch of anime. (it's running on the PI so not the most powerful server but it works)

I can now close half my tabs due to API json responses.

## Talking about jellyfin...
Jellyfin is really nice to use. Not the best player, however library management is good (with AMAZING metadata auto detection). and it's even better when setup correctly. Followed this video: https://www.youtube.com/watch?v=XzwFMqp_b_c to figure out
how to fully set it up as somethings (anime theme op/ed) weren't working properly. Although the video is slightly out of date, it worked so yay.

## I have done something other than qbit this week
Worked on my game a bit, or well a custom dropdown menu in godot as the default `OptionButton` doesn't provide enough functionality for what i want. However, working on anything in godot is semi hard due to not having full motivation on wanting to do
it.

## This turned into a sunday blog...
I gave up trying to write about stuff, so thought i would just leave it for a couple of days.

## I have semi setup yubikey.
It's not perfect, but it works. I've got it setup for ssh (mainly with github), git signing and as a security key 2fa.

I would have preferred to set it up so that i had 2 keys (main and backup) for both ssh + signing. But it seems like software doesn't fully allow for that. I also want a fallback method for in case i forget my yubikey. Guess for now i'll just have to
be careful. At least it somewhat setup though.

I was going to make a whole document on it, but gave up as it was super simple. I just tried doing more complex things with git/ssh which seem to be not intended.

## I completed a route!
Just the normal route though.

Oh, the game? [Mashiroiro Symphony HD -Love is Pure White-](https://store.steampowered.com/app/2737970/Mashiroiro_Symphony_HD_Love_is_Pure_White/).

I wasn't aiming for the common route though, i was aiming for the sister route to begin with. Then Sana (as it's a different game) and the rest from there. However, the game had different ideas. Apparently... You have to install the 18+ patch to get a
dialogue scene which leads to a choice scene which allows you to go down the sister route... Only found that out due to this comment: https://steamcommunity.com/app/2737970/discussions/0/4360124651931625160/#c4360124651932068455. SO yeah, had to go to
`patch.moe` and download said patch. Which took way longer as it seemed to have to dig it up from cold storage.

Now that i have the patch though, i can go down sister route. And immeditaley the game went from 13+ to 16+ just in the dialogue alone. But i want to complete the game, so 18+ patch it is...

## That being said... I found a VN yt channel.
[DragonForce AnimeReviews](https://www.youtube.com/@DragonForceAnimeReviews), dont think they do anime but they do a lot of VNs. Meaning i can just sit back and watch instead of play. Watching seems feels different as well. Probably because its quicker
to start/pause and i don't have to worry about linux issues.

That being said, i do still want to playthrough some myself. Just because i want to. There is a charm to self playthrough. But it's still nice to have an external source.

## Ok, end of blog.
I do have one extra thing to add, but that i'll keep private. Too special to share.

SO for now, i'll go back to doing nothing. Maybe i'll have something new next week... Oh wait, it's august next week as well.
